##### 参考

```
https://zhuanlan.zhihu.com/p/87864677
```

# vscode

```
https://blog.csdn.net/Zhouzi_heng/article/details/115014059



https://www.cnblogs.com/bpf-1024/p/11597000.html


https://zhuanlan.zhihu.com/p/87864677



打开 cpp 文件
F5
选择调试器
"C++(DGB/LLDB)"
"C/C++:gcc.exe 生成活动文件"
会生成 task.json 文件

打开 launch.json 文件
"C++(DGB/LLDB)"
打开 launch.json 文件
运行
添加配置, 选择 "C/C++(windows):启动"
"program" 为 "${fileDirname}\\${fileBasenameNoExtension}.exe"
```

##### 参数

```
这里解释一下args中自定义 exe文件存放路径：
${workspaceFolder}： 当前工作路径
exe： 自己建的文件夹
${fileBasenameNoExtension}： 当前文件的文件名，NoExtension意思就是不带后缀名，然后加个 .exe 就是当前的exe文件，也就是编译生成的 exe 文件
上述路径放一起意思就编译生成的 exe 文件放在exe文件夹中， 把这条配置删除的话，编译生成的exe文件就默认放在了当前工作路径下。

顺便说一下 vscode 中一些变量代表什么意思
${workspaceFolder} :表示当前workspace文件夹路径，也即/home/Coding/Test
${workspaceRootFolderName}:表示workspace的文件夹名，也即Test
${file}:文件自身的绝对路径，也即/home/Coding/Test/.vscode/tasks.json
${relativeFile}:文件在workspace中的路径，也即.vscode/tasks.json
${fileBasenameNoExtension}:当前文件的文件名，不带后缀，也即tasks
${fileBasename}:当前文件的文件名，tasks.json
${fileDirname}:文件所在的文件夹路径，也即/home/Coding/Test/.vscode
${fileExtname}:当前文件的后缀，也即.json
${lineNumber}:当前文件光标所在的行号
${env:PATH}:系统中的环境变量
```



##### 安装 mingw

> [官网](https://www.mingw-w64.org/)
>
> [github](https://github.com/niXman/mingw-builds-binaries/releases)

```
mingw32-gcc.bin（c语言文件编译器）
mingw32-gcc-g++.bin（c++语言编译器）
mingw32-gdb.bin（调试编译后文件）
```



```
选择 posix 或 seh 版本. posix 与 Unix 下的线程模型使用相同接口, seh 效率更高，只在 64 位可用.
用 seh

https://github.com/niXman/mingw-builds-binaries/releases/download/12.2.0-rt_v10-rev1/x86_64-12.2.0-release-posix-seh-rt_v10-rev1.7z
解压后添加环境变量到 mingw64/bin/

C:\opt\x86_64-12.2.0-release-posix-seh-rt_v10-rev1\mingw64\bin

测试是否安装成功
gcc -v
```

##### debug

- 生成 launch.json 文件

  ```
  1. 打开 .cpp 文件
  2. debug 中 "创建 launch.json 文件", 选择 "C++(DGB/LLDB)"
  3. 打开 launch.json 文件
  4. 运行
  5. 添加配置, 选择 "C/C++(windows):启动"
  6. 修改 
      "program" 为 "${fileDirname}\\${fileBasenameNoExtension}.exe"
      "externalConsole": true,      //修改此项，让其弹出终端
  ```

- 生成 task.json 文件

  ```
  1. 打开 .cpp 文件
  2. 终端
  3. 配置默认生成任务, 选择 "C/C++:gcc.exe 生成活动文件"
  4. 
  F5 -> 选择 C++(DGB/LLDB) -> 选择 C++.exe
  ```

- 生成  c_cpp_properties.json 文件 （配置解释器 ）

  ```
  
  ```

  

##### 创建 c_cpp_properties.json 文件

- 生成 c_cpp_properties.json 文件

  ```
  1. Ctrl+Shift+P -> 输入 "C/C++:Edit Configurations(UI)" 进入配置 -> 
  2. 设置 "编译器路径" 到 gcc.exe (还是 g++.exe)
  3. "配置名称" -> "添加配置" -> 输入名称
  4. "IntelliSense 模式" 选择 "windows-gcc-64"
  5. 完成配置后生成 .vscode/c_cpp_properties.json 文件
  6. 添加 includepath 路径
  ```

- 添加 includepath 路径

  ```bash
  # 查看 includepath 路径
  $ gcc -v -E -x c++ - 
  
  # 查询的路径添加入 includepath 
  C:/opt/x86_64-12.2.0-release-posix-seh-rt_v10-rev1/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/12.2.0/include/c++
  C:/opt/x86_64-12.2.0-release-posix-seh-rt_v10-rev1/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/12.2.0/include/c++/x86_64-w64-mingw32
  C:/opt/x86_64-12.2.0-release-posix-seh-rt_v10-rev1/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/12.2.0/include/c++/backward
  C:/opt/x86_64-12.2.0-release-posix-seh-rt_v10-rev1/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/12.2.0/include
  C:/opt/x86_64-12.2.0-release-posix-seh-rt_v10-rev1/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/12.2.0/include-fixed
  C:/opt/x86_64-12.2.0-release-posix-seh-rt_v10-rev1/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/12.2.0/../../../../x86_64-w64-mingw32/include
  ```

##### 创建 launch.json 文件

```
打开要运行的 .c 文件
F5
C++(windows) 会生成 launch.json 文件
打开 launch.json 文件
运行
添加配置
C/C++(windows): 启动
```

```json
{  
    "version": "0.2.0",  
    "configurations": [  
        {  
            "name": "(gdb) Launch", // 配置名称，将会在启动配置的下拉菜单中显示  
            "type": "cppdbg",       // 配置类型，这里只能为cppdbg  
            "request": "launch",    // 请求配置类型，可以为launch（启动）或attach（附加）  
            "program": "${workspaceFolder}/exe/${fileBasenameNoExtension}.exe",// 将要进行调试的程序的路径  
            "args": [],             // 程序调试时传递给程序的命令行参数，一般设为空即可  
            "stopAtEntry": false,   // 设为true时程序将暂停在程序入口处，一般设置为false  
            "cwd": "${workspaceFolder}", // 调试程序时的工作目录，一般为${workspaceFolder}即代码所在目录  
            "environment": [],  
            "externalConsole": true, // 调试时是否显示控制台窗口，一般设置为true显示控制台  
            "MIMode": "gdb",  
 
 
            // 这里的路径需要修改。改成自己的路径
            "miDebuggerPath": "D:/mingw64_GCC8.1/mingw64/bin/gdb.exe",
 
 
 
            "preLaunchTask": "g++", // 调试会话开始前执行的任务，一般为编译程序，c++为g++, c为gcc  
            "setupCommands": [  
                {   
		    "description": "Enable pretty-printing for gdb",  
                    "text": "-enable-pretty-printing",  
                    "ignoreFailures": true  
                }  
            ]  
        }  
    ]  
}
```



##### 创建 task.json 文件

> 用于调用 g++ 编译器基于源代码创建可 exe 执行文件

```
打开 .c 文件
终端
配置默认生成任务
C/C++:gcc.exe生成活动文件
```

```json
{
    "version": "2.0.0",
    "command": "g++",
    "args": [
        "-g",
        "${file}",
        "-o",
        "${workspaceFolder}/exe/${fileBasenameNoExtension}.exe"
    ], // 编译命令参数
    "problemMatcher": {
        "owner": "cpp",
        "fileLocation": [
            "relative",
            "\\"
        ],
        "pattern": {
            "regexp": "^(.*):(\\d+):(\\d+):\\s+(warning|error):\\s+(.*)$",
            "file": 1,
            "line": 2,
            "column": 3,
            "severity": 4,
            "message": 5
        }
    }
}
```



```json
{
    // See https://go.microsoft.com/fwlink/?LinkId=733558 
    // for the documentation about the tasks.json format
    "version": "2.0.0",
    "tasks": [
        {
            "type": "shell",
            "label": "g++.exe build active file",//任务的名字，就是刚才在命令面板中选择的时候所看到的，可以自己设置
            "command": "D:/mingw-w64/x86_64-8.1.0-win32-seh-rt_v6-rev0/mingw64/bin/g++.exe",
            "args": [//编译时候的参数
                "-g",//添加gdb调试选项
                "${file}",
                "-o",//指定生成可执行文件的名称
                "${fileDirname}\\${fileBasenameNoExtension}.exe"
            ],
            "options": {
                "cwd": "D:/mingw-w64/x86_64-8.1.0-win32-seh-rt_v6-rev0/mingw64/bin"
            },
            "problemMatcher": [
                "$gcc"
            ],
            "group": {
                "kind": "build",
                "isDefault": true//表示快捷键Ctrl+Shift+B可以运行该任务
            }
        }
    ]
}
```

##### 实例 launch.json

> 运行 -> 添加配置

```json
{
    "configurations": [
        {
            "name": "Win32",
            "includePath": [
                "${workspaceFolder}/**"
            ],
            "defines": [
                "_DEBUG",
                "UNICODE",
                "_UNICODE"
            ],
            //此处是编译器路径，以后可直接在此修改
            "compilerPath": "D:/mingw-w64/x86_64-8.1.0-win32-seh-rt_v6-rev0/mingw64/bin/g++.exe",
            "cStandard": "c11",
            "cppStandard": "c++17",
            "intelliSenseMode": "gcc-x64"
        }
    ],
    "version": 4
}
```

# 问题

##### F5 运行报错

```
You may only use the C/C++ Extension for Visual Studio Code
with Visual Studio Code, Visual Studio or Visual Studio for Mac
software to help you develop and test your applications.
```

