##### 参考

```
https://www.51cto.com/article/597961.html
```

# IP

##### IP

<img src=".\image\ip地址.jpeg" alt="ip地址" style="zoom:90%;" />

```
连接到网络中的所有主机中识别出进行通信的目标地址
在 TCP/IP 通信中所有主机或路由器必须设定自己的 IP 地址
MAC 地址: 在数据链路层中识别机器
IP 地址: 在网络层中识别机器
IPv4 地址分为两个部分: 网络号和主机号
```

##### 网络号和广播地址

```
网络号: 代表了整个网络本身, 网段中的第一个地址
广播地址: 代表网络全部的主机, 网段中最后一个地址
这两个地址是不能配置在计算机主机上的


例如 192.168.0.0 网段中
	网络号是 192.168.0.0
	广播地址是 192.168.0.255
	可配置主机地址 192.168.0.1 ~ 192.168.0.254
```

##### 特殊 IP 地址

```
127.0.0.1
环回地址, 别名 localhost, 无论哪个程序, 一旦使用该地址发送数据, 协议软件会立即返回, 不进行任何网络传输


10.*.*.*
172.16.*.* ~ 172.31.*.*
192.168.*.*
都是私有 IP, 主要用于企业内部网络中, 不能在 Internet 网上使用, Internet 网没有这些地址的路由
使用这三个网段 IP 的计算机要上网必须要通过地址翻译 (NAT), 将私有地址翻译成公用合法的IP地址
由于私有个人网络不会与外部互连, 所以可以使用随意的IP地址, 保留这三个网段的IP 地址使其使用, 是为了避免以后接入公网时引起地址混乱


0.0.0.0
表示一个无效 / 未知 / 不可用的目标
在服务器中 0.0.0.0 表示本机上的所有 IPV4 地址. 如果一个主机有两个IP地址 192.168.1.1 和 10.1.2.1, 并且该主机上的一个服务监听的地址是 0.0.0.0:8080, 那么通过 192.168.1.1 :8080 和 10.1.2.1:8080 都能够访问该服务 
在路由中 0.0.0.0 表示默认路由，路由列表中没有完全匹配到路由时会匹配到该路由
在网关中 0.0.0.0 表示直连规则, 当目的 IP 在局域网内跟本机在同一个网段时, 通信不需要经过网关(路由器), 使用二层交换机通过MAC即可通信


169.254.*.*
如果网路设备自动获取 IP, 但该设备在网络上又没有找到可用的 DHCP 服务器, 那么该设备就会使用 169.254.0.0/16 网段的某个地址来进行临时通信


255.255.255.255
有限广播地址
可作为目的地址，报文将发往该网段所有主机
路由器接收到目的 IP 为 255.255.255.255 报文后, 路由器不会转发该 IP 的报文


224.0.0.0 ~ 239.255.255.255
组播地址
224.0.0.1 指所有的主机
224.0.0.2 指所有的路由器
224.0.0.5 指所有 OSPF 路由器地址
224.0.0.13 指 PIMV2 路由器的地址
224.0.0.0 ~ 224.0.0.255 只能用于局域网中路由器是不会转发的
239.0.0.0 ~ 239.255.255.255 是私有地址 (与192.168. *.*功能一样)，
224.0.1.0 ~ 238.255.255.255 可以用于 Internet 上
如果本机开启了 IRDp (Internet 路由发现协议，使用组播功能)功能, 那么主机路由表中应该会有这样的一条路由
```

##### IP 地址的分类

> 共 4 * 8 = 32 位

| 类   | 范围                                                         |
| ---- | ------------------------------------------------------------ |
| A 类 | 0.0.0.0 ~ 127.0.0.0<br />1 ~ 8 位是它的网络标识<br />后 24 位主机标识<br />一个网段内可容纳的主机地址上限为 16777214 个 |
| B 类 | 1 ~ 16 位是它的网络标识, 其中前两位是 10 的地址<br />128.0.0.0 ~ 191.255.0.0<br />后 16 位主机标识<br />一个网段内可容纳的主机地址上限为65,534个。 |
| C 类 | 1 ~  24 位是它的网络标识, 其中前三位是 110 的地址<br />192.0.0.0 ~ 223.255.255.0<br />后 8 位主机标识<br />一个网段内可容纳的主机地址上限为254个 |
| D 类 | 1 ~ 32 位是它的网络标识, 其中前四位为 1110 的地址<br />224.0.0.0 ~ 239.255.255.255 <br />D  类地址没有主机标识, 常用于多播 |
| E 类 |                                                              |

##### 判断两个主机在同一网段

```

```

# 子网掩码

##### 作用

```
自由控制 IP 中哪些位是网络地址, 哪些位是主机地址. 不再受限于自己A, B, C 的类别限制
子网掩码不能单独存在，必须结合 IP 一起使用

用 32 位二进制表示, 且 1 和 0 分别连续
左边 1 的个数是网络位长度
右边 0 的个数是主机位长度
    11111111.11111111.11111111.11100000		正确
    11111111.11111111.11111000.00000000		正确
    11111111.11011011.11110011.00000000		错误
```

##### 实例

```
表示方式 1
	192.39.187.241/255.255.255.240, 子网掩码是255.255.255.240
表示方式 2
	192.39.187.241/28


子网掩码 255.255.255.0
二进制 11111111.11111111.11111111.00000000
左边24位1表示的是网络号，右边8个0表示的是主机位数, 主机数为2^8-2 = 254个

子网掩码 255.255.255.240
二进制 11111111.11111111.11111111.11110000
左边28位1表示的是网络号，右边4个0表示的是主机位数, 主机数为2^4-2 = 14个


192.39.187.241/28
网络位是 28 位, 这与255.255.255.240表示的是同样的意思


正常的 C 类网络地址是24位网络号，默认的子网掩码 255.255.255.0, 8位主机号，但如果出现网络号数量不够用时，网络号便会向主机号借用，掩码255.255.255.240便是向主机位借了4位
```

```
32----------255 . 255 . 255 . 255
31----------255 . 255 . 255 . 254
30----------255 . 255 . 255 . 252
29----------255 . 255 . 255 . 248
28----------255 . 255 . 255 . 240
27----------255 . 255 . 255 . 224
26----------255 . 255 . 255 . 192
25----------255 . 255 . 255 . 128
24----------255 . 255 . 255 . 0
23----------255 . 255 . 254 . 0
22----------255 . 255 . 252 . 0
21----------255 . 255 . 248 . 0
20----------255 . 255 . 240 . 0
19----------255 . 255 . 224 . 0
18----------255 . 255 . 192 . 0
17----------255 . 255 . 128 . 0
16----------255 . 255 . 0 . 0
```

##### 计算方式

> 与运算
>
> 只要有0，结果即为0

```
IP 地址和子网掩码都换算成二进制, 两者进行逻辑与运算后，即可得网络地址


11000000.00100111.10111011.11110001		IP 二进制	 192.39.187.241
11111111.11111111.11111111.11110000		掩码二进制	255.255.255.240
与操作得到网络地址
11000000.00100111.10111011.11110000 = 192.39.187.240
```



# 路由器

<img src=".\image\路由.jpeg" alt="路由" style="zoom:100%;" />



```

发送数据包时所使用的地址是网络层的地址，即 IP 地址。
然而仅仅有 IP 地址还不足以实现将数据包发送到对端目标地址，在数据发送过程中还需要类似于“指明路由器或主机”的信息，以便真正发往目标地址。保存这种信息的就是路由控制表。
路由控制表的形成方式有两种：
静态路由控制: 手动设置
动态路由控制: 路由器与其他路由器相互交换信息时自动刷新


IP 协议始终认为路由表是正确的。
然后，IP 本身并没有定义制作路由控制表的协议。即 IP 没有制作路由控制表的机制。该表示由一个叫做“路由协议”的协议制作而成。

```

```
路由主要的功能实现跨网络通信
路由分类：
主机路由：描述网络中某主机怎么到达
网络路由：描述主机所在网络怎么到达，到达网络之后在ARP广播
默认路由：指明走的方向就能到达
访问时可能三种路由都知道，由优先级决定
路由的优先级：精度越高，优先级越高





```



##### 两个主机通信

```

```



# 交换机

> Switch

<img src="\image\路由器和交换机.jpg" alt="路由器和交换机" style="zoom:80%;" />

```
一般情况下, 路由器下面是交换机.
路由器是一种路由设备, 用于寻址和路由功能, 不适合大量的数据交换. 交换机用于大量的数据交换, 终端内部网络的性质是需要使用交换机
设备多时使用交换机. 家庭设备少时可以直接用路由器, 不用连交换机
```

##### 交换机分类

```
我们常见的交换机是以太网交换机，其他的还有工业交换机、光纤交换机等。
以太网交换机分为两种：广域网交换机和局域网交换机。
	广域网交换机主要是应用于电信城域网互联、互联网接入等领域的广域网中，提供通信用的基础平台
	局域网交换机就是我们常见的交换机了，应用于局域网络，用于连接终端设备，如服务器、工作站、集线器、路由器、网络打印机等网络设备，提供高速独立通信通道。
```

##### 路由器交换机区别

```
1. 工作层次不同: 交换机工作在数据链路层, 路由器工作在网络层

2. 功能不同
路由器把一个 IP 分配给很多个主机使用, 这些主机对外只表现出一个IP
交换机可以把很多主机连起来，这些主机对外各有各的IP

交换机用 MAC 地址物理地址来寻址, 路由器用 IP 地址来寻址
交换机转发依据 MAC 地址（物理地址），主要是用于组建局域网；
路由转发所依据 IP 地址（网络地址），负责让主机连接因特网

路由器是接外网的, 交换机是接内网的

交换机是用来进行局域网网段内的连接，不同局域网之间是无法进行连接。
路由器主要是用来进行不同网段内的连接，把所有的局域网之间进行互通，让不同网段的ip也可以实现互通
```



