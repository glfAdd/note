# 数据单元

##### 由上至下

```
message: 报文, 应用层, 包含了将要发送的完整的数据信息. 长度不限且可变
Datagram: 数据报, 传输层, 用于 UDP
Segment: 数据段, 传输层, 用于 TCP
Packet: 数据包, 网络层, 是在分组交换网络中传输的格式化数据单元。一个数据包分成两个部分，它包括控制信息，也就是表头数据，和数据本身，也就是负载。它的起始和目的地是网络层。
Frame: 数据帧, 数据链路层, 将上层传入的数据添加一个头部和尾部组成了帧. 它的起始点和目的点都是数据链路层
bit: 流, 物理层
```

##### 以太帧

```
以太帧有两种标准帧格式: Ethernet II 和 IEEE 802.3 格式(大多数使用这个格式)
Ethernet II 格式中包含一个 Type 字段, 标识以太帧处理完成之后将被发送到哪个上层协议进行处理
IEEE 802.3 格式中同样的位置是 Length 字段, 表示长度
根据 Length/Type 的值判断格式
    当Type字段值小于等于1500 (或者十六进制的0x05DC)时是IEEE 802.3
    当Type字段值大于等于1536 (或者十六进制的0x0600)时是Ethernet II
```



```
一个 Datagram 可能被封装成一个或几个 Packets，在数据链路层中传输。
这种协议栈逐层向下传递数据，并添加报头和报尾的过程称为封装




如上层数据在传输层添加TCP报头后得到的PDU被称为Segment（数据段 ）；
数据段被传递给网络层，网络层添加IP报头得到的PDU被称为Packet（数据包）；
数据包被传递到数据链路层，封装数据链路层报头得到的PDU被称为Frame（数据帧）；
最后，帧被转换为比特，通过网络介质传输。



应用数据经过 TCP/IP 每一层处理之后才能通过网络传输到目的端

每层都使用不同的协议数据单元 PDU (Protocol Data Unit), 其中包含的内容不同

应用层: 原始数据
传输层: 数据添加 TCP 报头得到的 PDU 被称为 Segment (数据段)
网络层: Segment 添加 IP 报头得到的 PDU 被称为 Packet (数据包)
链路层: Packet 封装数据链路层报头得到的 PDU 被称为 Frame (数据帧)
网络接口层: Frame 被转换为比特,通过网络介质传输


MTU (Maximum Transmission Unit) 最大传输单元，数据链路层的数据帧不是无限大的，数据帧长度受MTU限制

路径MTU：由链路中MTU的最小值决定。
```



# OSI 模型

```
物理层: 在设备之间传输比特流，规定了电平、速度和电缆针脚。常用设备有（各种物理设备）集线器、中继器、调制解调器、网线、双绞线、同轴电缆。这些都是物理层的传输介质。

数据链路层：将比特组合成字节，再将字节组合成帧，使用链路层地址（以太网使用MAC地址）来访问介质，并进行差错检测。---MAC地址

网络层：提供逻辑地址，供路由器确定路径。 本层通过IP寻址来建立两个节点之间的连接，为源端的运输层送来的分组，选择合适的路由和交换节点，正确无误地按照地址传送给目的端的运输层。就是通常说的IP层。这一层就是我们经常说的IP协议层。IP协议是Internet的基础。

传输层：提供面向连接或非面向连接的数据传递以及进行重传前的差错检测。包括处理差错控制和流量控制等问题，我们通常说的，TCP UDP就是在这一层。

会话层：负责建立、管理和终止表示层实体之间的通信会话。该层的通信由不同设备中的应用程序之间的服务请求和响应组成。

表示层：提供各种用于应用层数据的编码和转换功能，确保一个系统的应用层发送的数据能被另一个系统的应用层识别。该层可提供一种标准表示形式，用于将计算机内部的多种数据格式转换成通信中采用的标准表示形式。数据压缩和加密也是表示层可提供的转换功能之一。

应用层：OSI参考模型中最靠近用户的一层，为应用程序提供网络服务。我们常见应用层的网络服务协议有：HTTP，HTTPS，FTP，POP3、SMTP等。



```

```
为什么有些人会说TCP/IP有四层，而不是五层？

    有时候人们会将数据链路层和物理层统称为“网络接口层”，这样更简化了TCP/IP的五层模型。因此说TCP/IP是四层或者五层，都是正确的。
    
    
```

##### 封装过程

# TCP/IP模型

<img src=".\image\TCP-IP数据包1.webp" alt="TCP-IP数据包1" style="zoom:80%;" />

##### 实例 1

<img src=".\image\tcp-ip数据实例.jpeg" alt="tcp-ip数据实例" style="zoom:90%;" />

##### 实例 2

<img src=".\image\tcp-ip数据实例2.jpeg" alt="tcp-ip数据实例2" style="zoom:90%;" />

<img src=".\image\tcp-ip数据实例3.jpeg" alt="tcp-ip数据实例3" style="zoom:90%;" />

### 数据封装

##### 数据单元

- 数据单元 (data unit): 处理数据的单位. 
  - SDU: 数据单元
  - PDU: 协议数据单元 Protocol Data Unit

```
一般地,关注于逻辑数据关系的协议通常被称为上层协议,而关注于物理数据流的协议通常被称为低层协议



物理层: 传输比特流
数据链路层: 将比特组合成字节,再将字节组合成帧,使用链路层地址 (以太网使用MAC地址)来访问介质,并进行差错检测。
网络层:提供逻辑地址,供路由器确定路径。
传输层:提供面向连接或非面向连接的数据传递以及进行重传前的差错检测。
会话层:负责建立、管理和终止表示层实体之间的通信会话。该层的通信由不同设备中的应用程序之间的服务请求和响应组成。
表示层:提供各种用于应用层数据的编码和转换功能,确保一个系统的应用层发送的数据能被另一个系统的应用层识别。
应用层:OSI参考模型中最靠近用户的一层,为应用程序提供网络服务 。

```

##### 封装过程

```

```

# 协议

```
FTP（文件传输协议） 
HTTP（超文本传输协议） 
DNS（域名服务器协议） 
SMTP（简单邮件传输协议） 
NFS（网络文件系统协议）
TCP（控制传输协议） 
UDP（用户数据报协议） 
IP（网际协议） 
ICMP（网际控制消息协议） 
ARP（地址解析协议） 
RARP（反向地址解析协议） 
HDLC（高级链路控制协议） 
PPP（点对点协议）
SLIP（串行线路接口协议）
```

