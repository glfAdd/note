##### 一个完整的集中式日志系统，包含以下几个主要特点的

```
● 收集－能够采集多种来源的日志数据
● 传输－能够稳定的把日志数据传输到中央系统
● 存储－如何存储日志数据
● 分析－可以支持 UI 分析
● 警告－能够提供错误报告，监控机制
```

##### 可以实现的方案

- Elastic Stack(ELK升级版)
- apache 的 chukwa
- apache 的 flume 

|            | flume                                                        | chukwa                                                       | Elastic Stack                                                |
| ---------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 简介       | 收集，聚合，移动大量的日志数据，最终将数据存放到HDFS上. 适用于日志文件实时采集 | 开源的用于监控大型分布式系统的数据收集系统, 是一个对大数据量日志类数据采集、存储、分析和展示的全套解决方案和框架 | 获取任何来源、任何格式的数据，并且能够实时地对数据进行搜索、分析和可视化 |
| 架构       | Agent由source，channel、sink组成. 多个Agent可以组成调用链    | 这是构建在 hadoop 的 hdfs 和 map/reduce 框架之上             | ElasticSearch + Logstash + Kibana + beats                    |
| 可视化界面 |                                                              | hicc, 可以使用列表, 曲线图, 多曲线图, 柱状图, 面积图展示数据 | Kibana 为 Elasticsearch 提供分析和可视化的 Web 平台, 可以在 Elasticsearch 的索引中查找，交互数据，并生成各种维度的表图 |
| 搜索功能   | shell命令, sql                                               | shell命令, sql                                               | Elasticsearch分布式搜索引擎, 可以用于全文检索、结构化检索和分析 |
| 响应速度   | 实时采集                                                     | 分析数据是分钟级, 不是一个实时错误监控系统                   | 从日志产生到查询可见，能达到秒级完成数据的采集、处理和搜索统计 |
| 可扩展性   | Flume采用了三层架构, 每一层均可以水平扩展. 所有agent和collector由master统一管理，这使得系统容易监控和维护，且master允许有多个（使用ZooKeeper进行管理和负载均衡） | 继承了Hadoop的可扩展性                                       | Elasticsearch 分布式部署, 可以横向扩展至数百的服务器节点     |
| 可靠性     | 消息发送事务和重试, 下游崩溃时消息磁盘存档                   | 继承了Hadoop的稳定性                                         | 消除系统的单点，提高系统的冗余度                             |
| 负载均衡   | Agent和Collector间，Collector和Store间有LoadBalance和Failover两种模式(基于ZooKeeper) |                                                              | 缓存队列削峰填谷                                             |
| 缓存队列   | Memory、Jdbc、Kafka、File、自定义                            |                                                              | Redis / Kafka                                                |
| 缺点       |                                                              |                                                              | 1.三个独立的系统，没有统一的部署、管理工具，用户需要分别部署及管理这三套系统<br />2.不进行深度开发的话，数据挖掘能力弱 |

