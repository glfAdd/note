

- 每个对象记录自己被引用的次数, 每增加一个引用个数+1, 每减少一个引用个数-1, 数为0时释放. 维护引用计数消耗资源, 循环引用时无法回收
- 对象被创建 / 引用 / 作为参数 / 作为个元素存储在容器中
- 对象的别名被显式销毁, 对象的别名被赋予新的对象, 一个对象离开它的作用域, 一个函数执行完毕时, 对象所在的容器被销毁, 或从容器中删除对象

##### 查询引用次数

```python
import sys
a = 10
print(sys.getrefcount(a))
```

##### 结构体

```c
#define PyObject_HEAD       PyObject ob_base ;
#define PyObject_VAR_HEAD       PyVarObject ob_base;
//宏定义，包含上一个、下一个，用于构造双向链表用。(放到refchain链表中时，要用到)
#define _PyObject_HEAD_EXTRA            \
    struct _object *_ob_next;           \
    struct _object *_ob_prev;

typedef struct _object {
    _PyObject_HEAD_EXTRA            // 用于构造双向链表
    Py_ssize_t ob_refcnt;           // 引用计数器
    struct _typeobject *ob_type;    // 数据类型
} PyObject;

typedef struct {
    PyObject ob_base;       // PyObject对象
    Py_ssize_t ob_size; /* Number of items in variable part, 即:元素个数*/
} PyVarObject;
```



