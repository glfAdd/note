参考

```
https://blog.csdn.net/qq_43459116/article/details/124135318
```

## 数值

> 取值范围如果加了unsigned，则最大值翻倍，如 tinyint unsigned 的取值范围为(0~256)

| 类型          | 大小 Bytes | 有符号范围                    | 无符号范围          |
| ------------- | ---------- | ----------------------------- | ------------------- |
| tinyint       | 1          | -2⁷ ~ 2⁷-1 (-128 + 127)       | 0 ~ 2⁸-1 (0-255)    |
| smallint      | 2          | -2¹⁵ ~ 2¹⁵-1 (-32768 + 32767) | 0 ~ 2¹⁶-1 (65535)   |
| mediumint     | 3          | -2²³ ~ 2²³-1 (-83万 + 83万)   | 0 ~ 2²⁴-1 (0-167万) |
| int / integer | 4          | -2³¹ ~ 2³¹-1 (-21亿 +21亿)    | 0 ~ 2³²-1 (0-42亿)  |
| bigint        | 8          | -2⁶³ ~ 2⁶³-1                  | 0 ~ 2⁶⁴-1           |

### 整数

##### 属性 - M

1. 显示宽度, 取值范围是 (0, 255)
2. 如果设置了显示宽度, 那么插入的数据宽度超过显示宽度限制, 不会对插入的数据有任何影响，还是按照类型的实际宽度进行保存, 显示宽度与类型可以存储的值范围无关
3. 整型数据类型可以在定义表结构时指定所需要的显示宽度，如果不指定使用默认宽度值

```
例如: int(5)
当数据宽度小于 5 位时在数字前面需要用字符填满宽度, 该项功能需要配合 ZEROFILL 使用, 表示用 0 填满宽度, 否则指定显示宽度无效
```

##### 属性 - UNSIGNED

1. 无符号属性(非负), 最小取值为 0
2. 所有整数类型都有这个属性
3. int 类型默认显示宽度为 int(11), 无符号int类型默认显示宽度为 int(10)

##### 属性 - ZEROFILL

1. 0 填充
2. 在 int(M)中, M 的值跟 int(M) 所占多少存储空间并无任何关系, int(3), int(4), int(8) 在磁盘上都是占用 4 bytes 的存储空间
3. 指定 ZEROFILL 只是表示不够 M 位时用 0 在左边填充，如果超过M位，就按照实际位数存储不用字符 0 进行填充, 只要不超过数据存储范围即可
4. 如果某列是 ZEROFILL, 自动为当前列添加 UNSIGNED 属性
5. int(M) 必须和 UNSIGNED ZEROFILL 否则 int(M) 显示宽度无效

### 浮点

| 类型    | 大小Bytes  | 有符号                                                       | 无符号                                                       |
| ------- | ---------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| float   | 4          | (-3.402 823 466 E+38，-1.175 494 351 E-38)<br />0<br />(1.175 494 351 E-38，3.402 823 466 351 E+38) | 0<br />(1.175 494 351 E-38，3.402 823 466 E+38)              |
| double  | 8          | (-1.797 693 134 862 315 7 E+308，-2.225073858507 2014E-308)<br />0<br />(2.225 073 858 507 201 4 E-308，1.797 693 134 862 315 7 E+308) | 0<br />(2.225 073 858 507 201 4 E-308，1.797 693 134 862 315 7 E+308) |
| decimal | 取决于M和D |                                                              |                                                              |

##### 存储方式

<img src=".\image\float格式.jpg" alt="float格式" style="zoom:60%;" />

> 尾数: 小数点后的有多少个数位
>
> 浮点数类型无符号数取值范围有符号数取值范围大于等于零的部分, 无论有没有符号，MySQL 的浮点数都会存储表示符号的部分, 因此， 所谓的无符号数取值范围，其实就是有符号数取值范围大于等于零的部分.

```
1. float 和 double 都是近似值, 容易产生误差
	不能用 if(0.0000000001 == 0) 来判断, 因为 0.00000001 在计算的时候，可能会当作 0
2. float 长度 4 位, 用 32 个二进制描述, 小数部分 6 位, 加上小数点前的 1 位, 即有效数字为 7 位
3. double 长度 8 位, 用 64 个二进制描述. 小数部分 15 位, 加上小数点前的 1 位有效位数为 16 位

例如:
0.123456789 -> 0.123457
```

##### 精度设置

```
FLOAT(M,D)
DOUBLE(M,D)
	M为精度 = 整数位+小数位, 范围: D <= M <= 255
	D为标度 = 小数位, 范围: 0 <= D <= 30

CREATE TABLE `test_float` (
  `f1` float DEFAULT NULL,
  `f2` float(10,2) DEFAULT NULL,
  `f3` float(6,2) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;


1. 不指定位数则按默认的最大值进行存储, 最大值由实际的硬件和操作系统决定
2. 虽然可以对浮点数位数进行指定, 但是存储的空间都是不变 

例如:
	FLOAT(5,2) 如果超过 -999.99 - 999.99 这个范围会报错
  	FLOAT(5,2) UNSIGNED 只能表示 0 - 999.99 范围
```

##### 存储逻辑

```
不管是否显式设置了精度(M,D), MySQL 存储时方案如下
1. 存储时, 整数部分超出了范围, MySQL就会报错, 不允许存这样的值
2. 存储时，小数点部分若超出范围，就分以下情况：
	若四舍五入后, 整数部分没有超出范围, 则只警告, 但能成功操作并四舍五入删除多余的小数位后保存
	若四舍五入后，整数部分超出范围，则MySQL报错，并拒绝处理
	
例如:
	FLOAT(5,2) 列内插入 999.009, 近似结果是999.01
	FLOAT(5,2) 列内插入 999.995 和 -999.995 都会报错
```

##### 区别

|          | float | double |
| -------- | ----- | ------ |
| 精度     | 低    | 高     |
| 运算速度 | 快    | 慢     |
| 占用内存 | 少    | 多     |

### 定点数

##### 存储方式

<img src=".\image\DECIMAL存储1.jpg" alt="DECIMAL存储1" style="zoom:60%;" />

<img src=".\image\DECIMAL存储2.jpg" alt="DECIMAL存储2" style="zoom:60%;" />

```
说明:

从小数点位置起, 向前和向后每九个十进制位划分为一组进行存储
```



```
decimal 在 mysql 内存是以字符串存储, 精度高, 默认 decimal(10,0)
```

## 日期时间

| 类型      | 大小 ( bytes) | 范围                                      | 格式                | 用途               |
| --------- | ------------- | ----------------------------------------- | ------------------- | ------------------ |
| date      | 3             | 1000-01-01 ~ 9999-12-31                   | YYYY-MM-DD          | 日期               |
| time      | 3             | '-838:59:59'/'838:59:59'                  | HH:MM:SS            | 时间               |
| year      | 1             | 1901/2155                                 | YYYY                | 年                 |
| datetime  | 8             | 1000-01-01 00:00:00 ~ 9999-12-31 23:59:59 | YYYY-MM-DD HH:MM:SS | 日期和时间         |
| timestamp | 4             |                                           | YYYYMMDD HHMMSS     | 日期和时间, 时间戳 |

##### timestamp

```
TIMESTAMP(14) YYYYMMDDHHMMSS
TIMESTAMP(12) YYMMDDHHMMSS
TIMESTAMP(10) YYMMDDHHMM
TIMESTAMP(8) YYYYMMDD
TIMESTAMP(6) YYMMDD
TIMESTAMP(4) YYMM
TIMESTAMP(2) YY
```

## 字符串/文本

| 类型       | 大小            | 用途             |
| ---------- | --------------- | ---------------- |
| char       | 最大 255 字节   | 定长字符串       |
| varchar    | 最大 65535 字节 | 变长字符串       |
| tinytext   | 最大 255 字节   | 短文本字符串     |
| text       | 最大 64K        | 长文本数据       |
| mediumtext | 最大 16M        | 中等长度文本数据 |
| longtext   | 最大 4GB        | 极大文本数据     |

##### 	字符存储长度

```
不同编码方式字符存储长度不同
	定长：例如 ASCII 采用 1 个字节来编码一个字符, ucs2 采用 2 个字节来编码一个字符
	变长: utf8 采用 1~3 个字节来编码一个字符, gb2312 采用 1~2 个字节来编码一个字符, utf8mb4 使用1~4个字节来编码一个字符
```

##### char

```
CHAR(M)

1. 声明时长度默认 1 个字符
2. 数据实际长度比声明的长度小，会在右侧填充空格以达到指定的长度. 当 MySQL 检索 CHAR 类型的数据时, CHAR 类型的字段会去除尾部的空格
	保存时 '123 ' 变成了 '123'
```

##### varchar

```
VARCHAR(M)

1. 定义时, 必须指定字符长度M, 否则报错
2. 检索 VARCHAR 类型的字段数据时, 会保留数据尾部的空格. 
3. utf8 下一个字符占用 1 至 3 个字节, utf8 编码 varchar 最多存 65532/3 = 21844 个字符
4. varchar 实际范围是 65532 或 65533， 因为内容头部会占用1或2个字节保存该字符串的长度. 如果字段 default null（即默认值为空）, 整条记录还需要1个字节保存默认值null
```

##### text

```
1. 不能指定大小, 不能设置默认值
2. 尾部有空格不会被截断
```

## bool

```
mysql 是不支持 bool, 把一个数据设置成 bool 时, 数据库会自动转换成 tinyint(1) 类型, 值只有 0 和 1
```

## enum

```sql
1. 不允许为空时, 自动使用枚举值得第一个作为默认值
2. 枚举值必须使用字符串, 否则会报错
3. 写入值只能在固定值中选择, 可以在数据库层面限制非法值
4. 查询时可以使用字符串或存储的数字
5. 数据的存储为索引值，占用空间少
6. 按照索引值进行排序：NULL < '' = 0 < 1 < 2


SELECT sum(set1) from test_set WHERE set1 = 'aa';
```

##### 大小

```

```

##### order by

```sql
1. 默认排序按照枚举对应的索引排序
SELECT * FROM `test_enum` order by enum1;

2. 按照枚举的内容排序
SELECT * FROM `test_enum` order by concat(enum1);
SELECT * FROM `test_enum` order by cast(enum1 as n);
```

## set

```sql
1. 与 enum 相同, 但值可以选择枚举的多个
2. 不允许为空且没设置默认值, 默认为空字符串
3. 保存的值是索引值的和


SELECT sum(set1) from test_set WHERE set1 = 'aa';
```

## json

```
对象或数组的形式
```

